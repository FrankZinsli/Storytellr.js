!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.$story=t():e.$story=t()}(this,(function(){return(()=>{"use strict";var e={d:(t,o)=>{for(var l in o)e.o(o,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:o[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function o(e,t){for(var o in t)e.setAttribute(o,t[o])}function l(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}e.r(t),e.d(t,{AudioSlideshow:()=>f,HeaderImage:()=>u,HeaderImageSlideshow:()=>m,ImageFullscreen:()=>y,ImageSlideshow:()=>i,MediaSlideshow:()=>b,TextSlideshow:()=>g,TocGenerator:()=>r,VideoPlayer:()=>n});var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.imageCount=t.imageCount||!1,this.arrows=t.arrows||!1,this.controller=t.controller||!1,this.autoPlay=t.autoPlay||!1,this.slideshow=document.getElementById(this.id),this.storyImages=this.slideshow.getElementsByClassName("story-image"),this.imageCount&&this.createImageCount(this.storyImages),this.arrows&&this.createArrows(),this.controller&&this.createController(this.storyImages.length),this.autoPlay&&this.autoPlayer(this.autoPlay,this.id),e.showCurrentSlide(this.id,"")}var t,i,a;return t=e,a=[{key:"showCurrentSlide",value:function(e,t){var o,l,i;""===t&&(t=0),l=(o=document.getElementById(e)).getElementsByClassName("story-image"),i=o.querySelectorAll('*[class^="story-image-controller-"]');for(var a=0;a<l.length;a++)l[a].style.display="none",l[a].className=l[a].className.replace(" active-slide","");for(var n=0;n<i.length;n++)i[n].className=i[n].className.replace(" active-controller","");l[t].style.display="block",l[t].className+=" active-slide",i[t].className+=" active-controller"}},{key:"showNextSlide",value:function(e,t){var o,l,i,a,n;l=(o=document.getElementById(e)).getElementsByClassName("story-image"),i=o.querySelectorAll('*[class^="story-image-controller-"]');for(var s=0;s<l.length;s++)l[s].classList.contains("active-slide")&&(a=s),l[s].style.display="none",l[s].className=l[s].className.replace(" active-slide","");for(var r=0;r<i.length;r++)i[r].className=i[r].className.replace(" active-controller","");l[n=a+t<0?l.length-1:a+t>l.length-1?0:a+t].style.display="block",l[n].className+=" active-slide",i[n].className+=" active-controller"}}],(i=[{key:"createImageCount",value:function(e){for(var t,l,i=0;i<e.length;i++)o(t=document.createElement("div"),{class:"story-slideNumber"}),l=document.createTextNode(i+1+" / "+e.length),t.appendChild(l),e[i].insertBefore(t,e[i].firstChild)}},{key:"createArrows",value:function(){var e,t;e=document.createElement("a"),t=document.createElement("a"),o(e,{class:"story-prevImage",onclick:'$story.ImageSlideshow.showNextSlide("'+this.id+'", -1)'}),e.innerHTML="&#10094",o(t,{class:"story-nextImage",onclick:'$story.ImageSlideshow.showNextSlide("'+this.id+'", 1)'}),t.innerHTML="&#10095",this.slideshow.appendChild(e),this.slideshow.appendChild(t)}},{key:"createController",value:function(e){var t,l;if("dot"===this.controller){o(t=document.createElement("div"),{class:"story-image-controllers"});for(var i=0;i<e;i++)o(l=document.createElement("span"),{class:"story-image-controller-"+this.controller,onclick:'$story.ImageSlideshow.showCurrentSlide("'+this.id+'", '+i+")"}),t.appendChild(l),this.slideshow.appendChild(t)}}},{key:"autoPlayer",value:function(e,t){var o,l,i;o=document.getElementById(t),l=o.getElementsByClassName("story-image"),i=o.querySelectorAll('*[class^="story-image-controller-"]'),setInterval((function(){for(var e,t,o=0;o<l.length;o++)l[o].classList.contains("active-slide")&&(e=o),l[o].style.display="none",l[o].className=l[o].className.replace(" active-slide","");for(var a=0;a<i.length;a++)i[a].className=i[a].className.replace(" active-controller","");t=++e<0?l.length-1:e>l.length-1?0:e,l[t].style.display="block",l[t].className+=" active-slide",i[t].className+=" active-controller"}),e)}}])&&l(t.prototype,i),a&&l(t,a),e}();function a(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.urlOptions="",this.id=t.id,t.youtube?this.youtube={videoId:t.youtube.videoId,autoplay:t.youtube.autoplay||!1,allowFullScreen:t.youtube.allowFullScreen||!0,controls:!1!==t.youtube.controls,end:t.youtube.end||!1,loop:t.youtube.loop||!1,mute:t.youtube.mute||!1,start:t.youtube.start||!1,modestbranding:t.youtube.modestbranding||!1,playsInline:t.youtube.playsInline||!1}:t.vimeo&&(this.vimeo={videoId:t.vimeo.videoId,autopause:t.vimeo.autopause||!1,autoplay:t.vimeo.autoplay||!1,controls:!1!==t.vimeo.controls,loop:t.vimeo.loop||!1,muted:t.vimeo.muted||!1,quality:t.vimeo.quality||"auto",allowFullScreen:t.vimeo.allowFullScreen||!1,background:t.vimeo.background||!1,playsInline:t.vimeo.playsInline||!1}),this.youtube&&document.getElementById(this.id)?(this.youtube.autoplay&&this.addUrlOptionYt("autoplay=1&origin="+window.location.origin),this.youtube.loop&&this.addUrlOptionYt("playlist="+this.youtube.videoId+"&loop=1"),!this.youtube.controls&&this.addUrlOptionYt("controls=0"),this.youtube.modestbranding&&this.addUrlOptionYt("modestbranding=1"),this.youtube.start&&this.addUrlOptionYt("start="+this.youtube.start),this.youtube.end&&this.addUrlOptionYt("end="+this.youtube.end),this.youtube.mute&&this.addUrlOptionYt("mute=1"),this.youtube.playsInline&&this.addUrlOptionYt("playsinline=1"),!this.youtube.playsInline&&this.addUrlOptionYt("playsinline=0"),this.youtube.allowFullScreen&&this.addUrlOptionYt(" allowfullscreen"),this.createYoutubePlayer(this.id,this.youtube.videoId,this.urlOptions)):this.vimeo&&document.getElementById(this.id)&&!1===this.vimeo.background?(this.vimeo.autopause&&this.addUrlOptionVimeo("autopause=1"),this.vimeo.autoplay&&this.addUrlOptionVimeo("autoplay=1"),this.vimeo.loop&&this.addUrlOptionVimeo("loop=1"),!this.vimeo.controls&&this.addUrlOptionVimeo("controls=0"),this.vimeo.muted&&this.addUrlOptionVimeo("muted=1"),this.vimeo.playsInline&&this.addUrlOptionVimeo("playsinline=1"),!this.vimeo.playsInline&&this.addUrlOptionVimeo("playsinline=0"),this.vimeo.quality&&this.addUrlOptionVimeo("quality="+this.vimeo.quality),this.createVimeoPlayer(this.id,this.vimeo.videoId,this.urlOptions)):this.vimeo&&document.getElementById(this.id)&&!0===this.vimeo.background&&(this.addUrlOptionVimeo("background=1"),this.addUrlOptionVimeo("autoplay=1"),this.addUrlOptionVimeo("loop=1"),this.addUrlOptionVimeo("byline=0"),this.addUrlOptionVimeo("title=0"),this.createVimeoPlayer(this.id,this.vimeo.videoId,this.urlOptions))}var t,l;return t=e,(l=[{key:"addUrlOptionYt",value:function(e){""===this.urlOptions?this.urlOptions=this.urlOptions.concat("?"+e):this.urlOptions=this.urlOptions.concat("&"+e)}},{key:"addUrlOptionVimeo",value:function(e){""===this.urlOptions?this.urlOptions=this.urlOptions.concat("?"+e):this.urlOptions=this.urlOptions.concat("&"+e)}},{key:"createYoutubePlayer",value:function(e,t,l){var i,a,n,s;i="http://www.youtube.com/embed/"+t+l,a=document.getElementById(e),o(n=document.createElement("div"),{class:"story-video-container"}),a.appendChild(n),s=document.createElement("iframe"),this.youtube.allowFullScreen&&o(s,{allowfullscreen:"allowfullscreen",mozallowfullscreen:"mozallowfullscreen",msallowfullscreen:"msallowfullscreen",oallowfullscreen:"oallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen"}),o(s,{class:"story-youtube-player",src:i,style:"width:100%; height: 100%"}),n.appendChild(s)}},{key:"createVimeoPlayer",value:function(e,t,l){var i,a,n,s;i="https://player.vimeo.com/video/"+t+l,a=document.getElementById(e),o(n=document.createElement("div"),{class:"story-video-container"}),a.insertBefore(n,a.firstChild),s=document.createElement("iframe"),this.vimeo.allowFullScreen&&o(s,{allowfullscreen:"allowfullscreen",mozallowfullscreen:"mozallowfullscreen",msallowfullscreen:"msallowfullscreen",oallowfullscreen:"oallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen"}),this.vimeo.background?o(s,{frameborder:"0",allowfullscreen:"allowfullscreen",mozallowfullscreen:"mozallowfullscreen",msallowfullscreen:"msallowfullscreen",oallowfullscreen:"oallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen",title:"vimeo-header-player",class:"story-vimeo-header-player",src:i}):o(s,{title:"vimeo-player",class:"story-vimeo-player",src:i,style:"width:100%; height: 100%"}),n.appendChild(s)}}])&&a(t.prototype,l),e}();function s(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.listType=t.listType,this.navLink=t.navLink,this.tocElement=document.getElementById(this.id),this.id&&this.createToc(this.tocElement,this.listType,this.navLink)}var t,l,i;return t=e,i=[{key:"createNavLink",value:function(e,t){var o,l,i;return o=document.createElement("li"),l=document.createElement("a"),i=document.createTextNode(e.innerHTML),l.appendChild(i),l.title=e.innerHTML,l.href="#"+e.id,(o=t.appendChild(o)).appendChild(l),o}}],(l=[{key:"createToc",value:function(t,l,i){var a,n,s,r,c,u;if("ul"===l)a=document.createElement("ul");else{if("ol"!==l)return console.error("Wrong listType",l);a=document.createElement("ol")}o(a,{class:"story-toc-list-"+l}),u=t.appendChild(a),document.querySelectorAll("[class*='story-toc-element-']").forEach((function(t){t.classList.contains("story-toc-element-1")?n=i?e.createNavLink(t,u):document.createElement("li").innerHTML=t.innerHTML:t.classList.contains("story-toc-element-2")&&("ol"!==u.lastChild.localName&&"ul"!==u.lastChild.localName&&(r=document.createElement(l)),s=i?e.createNavLink(t,u):document.createElement("li").innerHTML=t.innerHTML,c=r.appendChild(s),n=c.parentElement),u.appendChild(n)}))}}])&&s(t.prototype,l),i&&s(t,i),e}();function c(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.headerElement=document.getElementById(this.id),this.src=t.src,this.focusPointLeft=t.focusPointLeft||"50%",this.focusPointTop=t.focusPointTop||"50%",this.greyscale=t.greyscale||!1,this.id&&this.createHeaderImage(this.headerElement,this.src,this.focusPointLeft,this.focusPointTop)}var t,o;return t=e,(o=[{key:"createHeaderImage",value:function(e,t,o,l){e.style.cssText="background-image: url('"+t+"'); background-position: "+o+" "+l+";"}}])&&c(t.prototype,o),e}();function d(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.autoplay=t.autoplay||9e3,this.slideshowElement=document.getElementById(this.id),this.autoplay&&this.createHeaderImageSlideshow(this.autoplay,this.id,this.slideshowElement)}var t,o;return t=e,(o=[{key:"createHeaderImageSlideshow",value:function(e,t,o){var l,i,a,n,s,r,c,u,d,m=0;for(l=document.getElementById(t),i=l.getElementsByClassName("story-header-image"),n=0;n<i.length;n++)0===n&&(r=i[n].firstElementChild.attributes.src.nodeValue,c=i[n].getElementsByTagName("img")[0].getAttribute("data-story-focus-left")||"50%",u=i[n].getElementsByTagName("img")[0].getAttribute("data-story-focus-top")||"50%",o.style.cssText="background-image: url('"+r+"'); background-position: "+c+" "+u+";"),i[n].style.display="none";d=e/1e3,setInterval((function(){for(s=0;s<i.length;s++)i[s].classList.contains("story-header-image-active")&&(m=s),i[s].style.opacity=0,i[s].style.display="none",i[s].className=i[s].className.replace(" story-header-image-active","");++m>i.length-1?(a=0,m=0):a=m,r=i[a].firstElementChild.attributes.src.nodeValue,c=i[a].getElementsByTagName("img")[0].getAttribute("data-story-focus-left")||"50%",u=i[a].getElementsByTagName("img")[0].getAttribute("data-story-focus-top")||"50%",o.style.cssText="background-image: url("+r+"); background-position: "+c+" "+u+"; animation-delay: "+d+"s;",d+=e/1e3}),e)}}])&&d(t.prototype,o),e}();function h(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ids=t.imageIds,this.createLog(this.ids)}var t,l;return t=e,(l=[{key:"createLog",value:function(e){e.forEach((function(e){var t,l,i,a,n;l=document.getElementById(e),o(t=document.createElement("div"),{id:"modal-"+e,class:"story-image-zoom-modal",style:"display: none"}),t=l.parentNode.insertBefore(t,l.nextSibling),o(n=document.createElement("span"),{id:"closeModal-"+e,class:"story-image-zoom-close"}),(n=t.appendChild(n)).innerHTML="&times;",o(i=document.createElement("img"),{id:"modalContent-"+e,class:"story-image-zoom-modal-content",src:l.src,alt:l.alt}),i=t.appendChild(i),o(a=document.createElement("div"),{id:"captionContent-"+e,class:"story-image-zoom-modal-caption"}),a=t.appendChild(a),l.onclick=function(){t.style.display="block",i.src=this.src,a.innerHTML=this.alt},n.onclick=function(){t.style.display="none"}}))}}])&&h(t.prototype,l),e}();function p(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.autoplay=t.autoplay||!1,this.audioSlideshow=document.getElementById(this.id),this.storyAudios=this.audioSlideshow.getElementsByClassName("story-audio-slideshow-container"),this.count=t.count||!1,this.count&&this.createAudioCount(this.storyAudios),this.createAudioController(this.storyAudios),e.showCurrentAudio(this.id,this.autoplay,"")}var t,l,i;return t=e,i=[{key:"showCurrentAudio",value:function(e,t,o){var l,i,a,n,s;i=(l=document.getElementById(e)).getElementsByClassName("story-audio-slideshow-container"),a=l.querySelectorAll('*[class^="story-audio-controller"]'),s=l.getElementsByClassName("story-audio-player");for(var r=0;r<i.length;r++)i[r].style.display="none",s[r].currentTime=0,s[r].pause();""===o?o=0:!0===t&&s[o].play(),n=l.getElementsByClassName("story-audio-controller-"+[o]),i[o].style.display="block";for(var c=0;c<a.length;c++)a[c].className=a[c].className.replace(" active-audio-controller","");for(var u=0;u<n.length;u++)n[u].className+=" active-audio-controller"}}],(l=[{key:"createAudioCount",value:function(e){var t,o,l;t=this.audioSlideshow.getElementsByClassName("story-audio-slideshow-caption");for(var i=0;i<e.length;i++)o=t[i].innerText,l="("+(i+1)+" / "+e.length+") "+o,t[i].innerText=l}},{key:"createAudioController",value:function(e){var t,l,i;i=this.audioSlideshow.getElementsByClassName("story-audio-player");for(var a=0;a<e.length;a++){o(t=document.createElement("div"),{class:"story-audio-controllers"});for(var n=0;n<e.length;n++)o(l=document.createElement("span"),{class:"story-audio-controller story-audio-controller-"+n,onclick:'$story.AudioSlideshow.showCurrentAudio("'+this.id+'", '+this.autoplay+", "+n+")"}),t.appendChild(l);i[a].parentNode.insertBefore(t,i[a].nextSibling)}}}])&&p(t.prototype,l),i&&p(t,i),e}();function v(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.textSlideshow=document.getElementById(this.id),this.storyTexts=this.textSlideshow.getElementsByClassName("story-text-slideshow-container"),this.createTextController(this.storyTexts),e.showCurrentText(this.id,"")}var t,l,i;return t=e,i=[{key:"showCurrentText",value:function(e,t){var o,l,i,a;""===t&&(t=0),l=(o=document.getElementById(e)).getElementsByClassName("story-text-slideshow-container"),i=o.querySelectorAll('*[class^="story-text-controller"]'),a=o.getElementsByClassName("story-text-controller-"+[t]);for(var n=0;n<l.length;n++)l[n].style.display="none";l[t].style.display="block";for(var s=0;s<i.length;s++)i[s].className=i[s].className.replace(" active-text-controller","");for(var r=0;r<a.length;r++)a[r].className+=" active-text-controller"}}],(l=[{key:"createTextController",value:function(e){var t,l,i;i=this.textSlideshow.getElementsByClassName("story-text-slideshow-container");for(var a=0;a<e.length;a++){o(t=document.createElement("div"),{class:"story-text-controllers"});for(var n=0;n<e.length;n++)o(l=document.createElement("span"),{class:"story-text-controller story-text-controller-"+n,onclick:'$story.TextSlideshow.showCurrentText("'+this.id+'", '+n+")"}),t.appendChild(l);i[a].appendChild(t)}}}])&&v(t.prototype,l),i&&v(t,i),e}();function w(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.autoplay=t.autoplay||!1,this.mediaSlideshow=document.getElementById(this.id),this.storyMedias=this.mediaSlideshow.getElementsByClassName("story-media-slideshow-container"),this.createMediaController(this.storyMedias),e.showCurrentMedia(this.id,this.autoplay,"")}var t,l,i;return t=e,i=[{key:"showCurrentMedia",value:function(e,t,o){var l,i,a,n,s;i=(l=document.getElementById(e)).getElementsByClassName("story-media-slideshow-container"),a=l.querySelectorAll('*[class^="story-media-controller"]'),s=l.getElementsByClassName("story-media-player");for(var r=0;r<i.length;r++)i[r].style.display="none",s[r].currentTime=0,s[r].pause();""===o?o=0:!0===t&&s[o].play(),n=l.getElementsByClassName("story-media-controller-"+[o]),i[o].style.display="block";for(var c=0;c<a.length;c++)a[c].className=a[c].className.replace(" active-media-controller","");for(var u=0;u<n.length;u++)n[u].className+=" active-media-controller"}}],(l=[{key:"createMediaController",value:function(e){var t,l,i;i=this.mediaSlideshow.getElementsByClassName("story-media-slideshow-container");for(var a=0;a<e.length;a++){o(t=document.createElement("div"),{class:"story-media-controllers"});for(var n=0;n<e.length;n++)o(l=document.createElement("span"),{class:"story-media-controller story-media-controller-"+n,onclick:'$story.MediaSlideshow.showCurrentMedia("'+this.id+'", '+this.autoplay+", "+n+")"}),t.appendChild(l);i[a].appendChild(t)}}}])&&w(t.prototype,l),i&&w(t,i),e}();return t})()}));
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.$story=t():e.$story=t()}(this,(function(){return(()=>{"use strict";var e={d:(t,o)=>{for(var l in o)e.o(o,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:o[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function o(e,t){for(var o in t)e.setAttribute(o,t[o])}function l(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}e.r(t),e.d(t,{HeaderImage:()=>u,HeaderImageSlideshow:()=>m,ImageFullscreen:()=>y,ImageSlideshow:()=>i,TocGenerator:()=>r,VideoPlayer:()=>n});var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.animation=t.animation,this.imageCount=t.imageCount,this.arrows=t.arrows,this.controller=t.controller,this.autoPlay=t.autoPlay,this.slideshow=document.getElementById(this.id),this.storyImages=this.slideshow.getElementsByClassName("story-image"),this.imageCount&&this.createImageCount(this.storyImages),this.arrows&&this.createArrows(),this.animation&&this.createAnimation(this.animation,this.storyImages),this.controller&&this.createController(this.storyImages.length),this.autoPlay&&this.autoPlayer(this.autoPlay,this.id),e.showCurrentSlide(this.id,"")}var t,i,a;return t=e,a=[{key:"showCurrentSlide",value:function(e,t){""===t&&(t=0);for(var o=document.getElementById(e),l=o.getElementsByClassName("story-image"),i=o.querySelectorAll('*[class^="story-image-controller-"]'),a=0;a<l.length;a++)l[a].style.display="none",l[a].className=l[a].className.replace(" active-slide","");for(var n=0;n<i.length;n++)i[n].className=i[n].className.replace(" active-controller","");l[t].style.display="block",l[t].className+=" active-slide",i[t].className+=" active-controller"}},{key:"showNextSlide",value:function(e,t){for(var o=document.getElementById(e),l=(o.getElementsByClassName("story-image active-slide"),o.getElementsByClassName("story-image")),i=o.querySelectorAll('*[class^="story-image-controller-"]'),a=0;a<l.length;a++){if(l[a].classList.contains("active-slide"))var n=a;l[a].style.display="none",l[a].className=l[a].className.replace(" active-slide","")}for(var s=0;s<i.length;s++)i[s].className=i[s].className.replace(" active-controller","");if(n+t<0)var r=l.length-1;else r=n+t>l.length-1?0:n+t;l[r].style.display="block",l[r].className+=" active-slide",i[r].className+=" active-controller"}}],(i=[{key:"createImageCount",value:function(e){for(var t=0;t<e.length;t++){var l=document.createElement("div");o(l,{class:"story-slideNumber"});var i=document.createTextNode(t+1+" / "+e.length);l.appendChild(i),e[t].insertBefore(l,e[t].firstChild)}}},{key:"createArrows",value:function(){var e=document.createElement("a"),t=document.createElement("a");o(e,{class:"story-prevImage",onclick:'$story.ImageSlideshow.showNextSlide("'+this.id+'", -1)'}),e.innerHTML="&#10094",o(t,{class:"story-nextImage",onclick:'$story.ImageSlideshow.showNextSlide("'+this.id+'", 1)'}),t.innerHTML="&#10095",this.slideshow.appendChild(e),this.slideshow.appendChild(t)}},{key:"createAnimation",value:function(e,t){if("fade"===e||"default"===e||""===e)for(var o=0;o<t.length;o++)t[o].classList.add(e)}},{key:"createController",value:function(e){if("dot"===this.controller){var t=document.createElement("div");o(t,{class:"story-image-controllers"});for(var l=0;l<e;l++){var i=document.createElement("span");o(i,{class:"story-image-controller-"+this.controller,onclick:'$story.ImageSlideshow.showCurrentSlide("'+this.id+'", '+l+")"}),t.appendChild(i),this.slideshow.appendChild(t)}}}},{key:"autoPlayer",value:function(e,t){var o=document.getElementById(t),l=o.getElementsByClassName("story-image"),i=o.querySelectorAll('*[class^="story-image-controller-"]');setInterval((function(){for(var e=0;e<l.length;e++){if(l[e].classList.contains("active-slide"))var t=e;l[e].style.display="none",l[e].className=l[e].className.replace(" active-slide","")}for(var o=0;o<i.length;o++)i[o].className=i[o].className.replace(" active-controller","");if(++t<0)var a=l.length-1;else a=t>l.length-1?0:t;l[a].style.display="block",l[a].className+=" active-slide",i[a].className+=" active-controller"}),e)}}])&&l(t.prototype,i),a&&l(t,a),e}();function a(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.urlOptions="",this.id=t.id,t.youtube?this.youtube={videoId:t.youtube.videoId,autoplay:t.youtube.autoplay||!1,allowFullScreen:t.youtube.allowFullScreen||!0,controls:!1!==t.youtube.controls,end:t.youtube.end||!1,loop:t.youtube.loop||!1,mute:t.youtube.mute||!1,start:t.youtube.start||!1,modestbranding:t.youtube.modestbranding||!1}:t.vimeo&&(this.vimeo={videoId:t.vimeo.videoId,autopause:t.vimeo.autopause||!1,autoplay:t.vimeo.autoplay||!1,controls:!1!==t.vimeo.controls,loop:t.vimeo.loop||!1,muted:t.vimeo.muted||!1,quality:t.vimeo.quality||"auto",allowFullScreen:t.vimeo.allowFullScreen||!1,background:t.vimeo.background||!1}),this.youtube&&document.getElementById(this.id)?(this.youtube.autoplay&&this.addUrlOptionYt("autoplay=1&origin="+window.location.origin),this.youtube.loop&&this.addUrlOptionYt("playlist="+this.youtube.videoId+"&loop=1"),!this.youtube.controls&&this.addUrlOptionYt("controls=0"),this.youtube.modestbranding&&this.addUrlOptionYt("modestbranding=1"),this.youtube.start&&this.addUrlOptionYt("start="+this.youtube.start),this.youtube.end&&this.addUrlOptionYt("end="+this.youtube.end),this.youtube.mute&&this.addUrlOptionYt("mute=1"),this.youtube.allowFullScreen&&this.addUrlOptionYt(" allowfullscreen"),this.createYoutubePlayer(this.id,this.youtube.videoId,this.urlOptions)):this.vimeo&&document.getElementById(this.id)&&!1===this.vimeo.background?(this.vimeo.autopause&&this.addUrlOptionVimeo("autopause=1"),this.vimeo.autoplay&&this.addUrlOptionVimeo("autoplay=1"),this.vimeo.loop&&this.addUrlOptionVimeo("loop=1"),!this.vimeo.controls&&this.addUrlOptionVimeo("controls=0"),this.vimeo.muted&&this.addUrlOptionVimeo("muted=1"),this.vimeo.quality&&this.addUrlOptionVimeo("quality="+this.vimeo.quality),this.createVimeoPlayer(this.id,this.vimeo.videoId,this.urlOptions)):this.vimeo&&document.getElementById(this.id)&&!0===this.vimeo.background&&(this.addUrlOptionVimeo("background=1"),this.addUrlOptionVimeo("autoplay=1"),this.addUrlOptionVimeo("loop=1"),this.addUrlOptionVimeo("byline=0"),this.addUrlOptionVimeo("title=0"),this.createVimeoPlayer(this.id,this.vimeo.videoId,this.urlOptions))}var t,l;return t=e,(l=[{key:"addUrlOptionYt",value:function(e){""===this.urlOptions?this.urlOptions=this.urlOptions.concat("?"+e):this.urlOptions=this.urlOptions.concat("&"+e)}},{key:"addUrlOptionVimeo",value:function(e){""===this.urlOptions?this.urlOptions=this.urlOptions.concat("?"+e):this.urlOptions=this.urlOptions.concat("&"+e)}},{key:"createYoutubePlayer",value:function(e,t,l){var i="http://www.youtube.com/embed/"+t+l,a=document.getElementById(e),n=document.createElement("div");o(n,{class:"story-video-container"}),a.appendChild(n);var s=document.createElement("iframe");this.youtube.allowFullScreen&&o(s,{allowfullscreen:"allowfullscreen",mozallowfullscreen:"mozallowfullscreen",msallowfullscreen:"msallowfullscreen",oallowfullscreen:"oallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen"}),o(s,{class:"story-youtube-player",src:i,style:"width:100%; height: 100%"}),n.appendChild(s)}},{key:"createVimeoPlayer",value:function(e,t,l){var i="https://player.vimeo.com/video/"+t+l,a=document.getElementById(e),n=document.createElement("div");o(n,{class:"story-video-container"}),a.insertBefore(n,a.firstChild);var s=document.createElement("iframe");this.vimeo.allowFullScreen&&o(s,{allowfullscreen:"allowfullscreen",mozallowfullscreen:"mozallowfullscreen",msallowfullscreen:"msallowfullscreen",oallowfullscreen:"oallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen"}),this.vimeo.background?o(s,{frameborder:"0",allowfullscreen:"allowfullscreen",mozallowfullscreen:"mozallowfullscreen",msallowfullscreen:"msallowfullscreen",oallowfullscreen:"oallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen",title:"vimeo-header-player",class:"story-vimeo-header-player",src:i}):o(s,{title:"vimeo-player",class:"story-vimeo-player",src:i,style:"width:100%; height: 100%"}),n.appendChild(s)}}])&&a(t.prototype,l),e}();function s(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.listType=t.listType,this.navLink=t.navLink,this.tocElement=document.getElementById(this.id),this.id&&this.createToc(this.tocElement,this.listType,this.navLink)}var t,l,i;return t=e,i=[{key:"createNavLink",value:function(e,t){var o=document.createElement("li"),l=document.createElement("a"),i=document.createTextNode(e.innerHTML);return l.appendChild(i),l.title=e.innerHTML,l.href="#"+e.id,(o=t.appendChild(o)).appendChild(l),o}}],(l=[{key:"createToc",value:function(t,l,i){var a,n,s,r,c,u;if("ul"===l)a=document.createElement("ul");else{if("ol"!==l)return console.error("Wrong listType",l);a=document.createElement("ol")}o(a,{class:"story-toc-list-"+l}),u=t.appendChild(a),document.querySelectorAll("[class*='story-toc-element-']").forEach((function(t){t.classList.contains("story-toc-element-1")?n=i?e.createNavLink(t,u):document.createElement("li").innerHTML=t.innerHTML:t.classList.contains("story-toc-element-2")&&("ol"!==u.lastChild.localName&&"ul"!==u.lastChild.localName&&(r=document.createElement(l)),s=i?e.createNavLink(t,u):document.createElement("li").innerHTML=t.innerHTML,c=r.appendChild(s),n=c.parentElement),u.appendChild(n)}))}}])&&s(t.prototype,l),i&&s(t,i),e}();function c(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.headerElement=document.getElementById(this.id),this.src=t.src,this.focusPointLeft=t.focusPointLeft||"50%",this.focusPointTop=t.focusPointTop||"50%",this.greyscale=t.greyscale||!1,this.id&&this.createHeaderImage(this.headerElement,this.src,this.focusPointLeft,this.focusPointTop)}var t,o;return t=e,(o=[{key:"createHeaderImage",value:function(e,t,o,l){e.style.cssText="background-image: url('"+t+"'); background-position: "+o+" "+l+";"}}])&&c(t.prototype,o),e}();function d(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.autoplay=t.autoplay,this.slideshowElement=document.getElementById(this.id),this.autoplay&&this.createHeaderImageSlideshow(this.autoplay,this.id,this.slideshowElement)}var t,o;return t=e,(o=[{key:"createHeaderImageSlideshow",value:function(e,t,o){var l,i,a,n,s,r,c,u,d=0;for(l=document.getElementById(t),i=l.getElementsByClassName("story-header-image"),n=0;n<i.length;n++)0===n&&(r=i[n].firstElementChild.attributes.src.nodeValue,c=i[n].getElementsByTagName("img")[0].getAttribute("data-story-focus-left")||"50%",u=i[n].getElementsByTagName("img")[0].getAttribute("data-story-focus-top")||"50%",console.log(u,c),o.style.cssText="background-image: url('"+r+"'); background-position: "+c+" "+u+";"),i[n].style.display="none";var m=e/1e3;setInterval((function(){for(s=0;s<i.length;s++)i[s].classList.contains("story-header-image-active")&&(d=s),i[s].style.opacity=0,i[s].style.display="none",i[s].className=i[s].className.replace(" story-header-image-active","");++d>i.length-1?(a=0,d=0):a=d,r=i[a].firstElementChild.attributes.src.nodeValue,c=i[a].getElementsByTagName("img")[0].getAttribute("data-story-focus-left")||"50%",u=i[a].getElementsByTagName("img")[0].getAttribute("data-story-focus-top")||"50%",o.style.cssText="background-image: url("+r+"); background-position: "+c+" "+u+"; animation-delay: "+m+"s;",m+=e/1e3}),e)}}])&&d(t.prototype,o),e}();function h(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ids=t.imageIds,this.createLog(this.ids)}var t,l;return t=e,(l=[{key:"createLog",value:function(e){e.forEach((function(e){var t,l,i,a,n;l=document.getElementById(e),o(t=document.createElement("div"),{id:"modal-"+e,class:"story-image-zoom-modal",style:"display: none"}),t=l.parentNode.insertBefore(t,l.nextSibling),o(n=document.createElement("span"),{id:"closeModal-"+e,class:"story-image-zoom-close"}),(n=t.appendChild(n)).innerHTML="&times;",o(i=document.createElement("img"),{id:"modalContent-"+e,class:"story-image-zoom-modal-content",src:l.src,alt:l.alt}),i=t.appendChild(i),o(a=document.createElement("div"),{id:"captionContent-"+e,class:"story-image-zoom-modal-caption"}),a=t.appendChild(a),l.onclick=function(){t.style.display="block",i.src=this.src,a.innerHTML=this.alt},n.onclick=function(){t.style.display="none"}}))}}])&&h(t.prototype,l),e}();return t})()}));